<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Owners & Dogs</title>
    <script src="config.js" defer></script>
    <script src="dogs.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid black; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .dog-row { background-color: #f9f9f9; }
    </style>
</head>
<body>
    <h1>Manage Owners & Dogs</h1>
    <div x-data="dogsManager()">
        <button @click="addOwner()">Add Owner</button>
        <table>
            <thead>
                <tr>
                    <th>Given Name</th>
                    <th>Surname</th>
                    <th>Dog Name</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <template x-for="owner in owners" :key="owner.ID">
                <tbody>
                    <tr>
                        <td x-text="owner.GivenName"></td>
                        <td x-text="owner.Surname"></td>
                        <td></td>
                        <td>
                            <button @click="removeOwner(owner.ID)">Remove Owner</button>
                            <button @click="addDog(owner.ID)">Add Dog</button>
                        </td>
                    </tr>
                    <template x-for="dog in owner.Dogs" :key="dog.ID">
                        <tr class="dog-row">
                            <td colspan="2"></td>
                            <td x-text="dog.Name"></td>
                            <td>
                                <button @click="updateDog(owner.ID, dog.ID, dog.Name)">Edit</button>
                                <button @click="removeDog(owner.ID, dog.ID)">Remove</button>
                            </td>
                        </tr>
                    </template>
                </tbody>
            </template>
        </table>
    </div>
</body>
</html>
